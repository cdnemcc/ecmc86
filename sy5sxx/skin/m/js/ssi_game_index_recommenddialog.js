/**
 * 119you.com - 119手游网
 * @version v1.0
 * @link http://m.119you.com
 * @author MidFar(midfar@qq.com) http://midfar.com
 */
$(function(){function i(i,e){for(var a="",n=0;n<i.length;n++){for(var t=i[n],r=t.link?t.link.replace(resourceprefix,prefix):"",o={},s=0;s<t.downloadlink.length;s++){var d=t.downloadlink[s].type,l=t.downloadlink[s].jailbreak,c=d;"Y"==l&&(c+="-bp"),o[c]=t.downloadlink[s]}var v={},p=0;browser.versions.ios||browser.versions.iPhone||browser.versions.iPad?"undefined"!=typeof o.ipa?v=o.ipa:(v=o["ipa-bp"],p=1):v=browser.versions.android?o.apk:o.apk,a+='<div class="game-item1-container"><div class="game-item1 table">',a+='    <div class="tr">',a+='        <div class="td td1">',1==t.attribute||3==t.attribute?a+='            <div class="hot"></div>':"Y"==t.newflag&&(a+='            <div class="new"></div>'),a+='            <a href="'+r+'"><img src="'+prefix+addSizeSuffix(t.logofile,120,120)+'" data-original-src="'+prefix+t.logofile+'" onerror="loadIconError(this);" class="img" /></a>',a+="        </div>",a+='        <div class="td td2">',a+='            <a href="'+r+'"><div class="title">'+t.name+"</div>",a+='            <div class="text">'+(v&&v.filesize||"--")+"/"+t.downloadnum+"次下载</div>",a+='            <div class="star5"><div class="star-ruler">',a+='                <div class="level" style="width:'+20*(t.score||0)+'%;"><div class="level-bg"></div></div>',a+="            </div></div>",a+='            <div class="text">'+(t.instruction||"")+"</div></a>",a+=v?'            <a href="'+prefix+v.link+'&source=m_game_recdialog" class="link-download" data-gameid="'+t.id+'"></a>':'            <a href="#" class="link-download disabled" onclick="return false;"></a>',a+="        </div>",a+="    </div>",a+="</div></div>"}$(e).parent().parent().find(".game-item1-container").remove(),$(e).parent().before(a)}function e(){return browser.versions.ios||browser.versions.iPhone||browser.versions.iPad?"ipa":(browser.versions.android,"apk")}function a(a){$(a).hide().next().show();var n=$(a).attr("data-type"),t=parseFloat($(a).attr("data-pageindex")),r=parseFloat($(a).attr("data-pagesize")),o=e();!function(e,a){$.ajax({url:prefix+"api/game/ranking",type:"POST",data:{type:n,clienttype:o,publishtarget:"Html5",pageindex:a,pagesize:r,columns:"id,catalogid,logofile,url,link,downloadlink,attribute,newflag,name,filesize,downloadnum,instruction,version,score"},dataType:"json",success:function(n){$(e).attr("data-pageindex",a+1);var t=n._RESULT;i(t,e),n.pagesize*(n.pageindex+1)<n.total&&$(e).show(),"function"==typeof updateLinkDownloadStatus&&updateLinkDownloadStatus()},error:function(i){},complete:function(){$(e).next().hide()}})}(a,t)}function n(){$("#dialogLinkMore").after('<div class="link loading" style="display:none;">加载中</div>').click(function(){return a(this),!1})}n()});